PREFIX adms: <http://www.w3.org/ns/adms#>

# This migrations resets the last step data for the several subsidy applications.
# Because of a bug step is missing data but the form is set to "sent"
# This resets the status back to active so they can submit again

# SINT NIKLAAS
DELETE {
  GRAPH ?g {
    <http://data.lblod.info/id/subsidy-measure-consumptions/6336E6F42DCA2AFF1F189A77> adms:status ?oldConsumptionStatus .
    <http://data.lblod.info/id/application-forms/64A80D94B3F8FCA3E6EE2495> adms:status ?oldFormStatus .
  }
}
INSERT {
  GRAPH ?g {
    <http://data.lblod.info/id/subsidy-measure-consumptions/6336E6F42DCA2AFF1F189A77> adms:status <http://lblod.data.gift/concepts/c849ca98-455d-4f31-9e95-a3d9d06e4497> ; # ACTIVE status
    <http://www.w3.org/2007/uwa/context/common.owl#active> <http://lblod.data.info/id/subsidie-application-flow-steps/ad08beb8-b4a5-4a0e-ae99-1174b3b47d47>. # Set to last step
    <http://data.lblod.info/id/application-forms/64A80D94B3F8FCA3E6EE2495> adms:status <http://lblod.data.gift/concepts/79a52da4-f491-4e2f-9374-89a13cde8ecd> . # CONCEPT

  }
}
WHERE {
  GRAPH ?g {
    <http://data.lblod.info/id/subsidy-measure-consumptions/6336E6F42DCA2AFF1F189A77> adms:status ?oldConsumptionStatus .
    <http://data.lblod.info/id/application-forms/64A80D94B3F8FCA3E6EE2495> adms:status ?oldFormStatus .
  }
}
;
#MOL
DELETE {
  GRAPH ?g {
    <http://data.lblod.info/id/subsidy-measure-consumptions/63491AA4C8723785872F8DF3> adms:status ?oldConsumptionStatus .
    <http://data.lblod.info/id/application-forms/653B78470D9A7F921679D057> adms:status ?oldFormStatus .
  }
}
INSERT {
  GRAPH ?g {
    <http://data.lblod.info/id/subsidy-measure-consumptions/63491AA4C8723785872F8DF3> adms:status <http://lblod.data.gift/concepts/c849ca98-455d-4f31-9e95-a3d9d06e4497> ; # ACTIVE status
    <http://www.w3.org/2007/uwa/context/common.owl#active> <http://lblod.data.info/id/subsidie-application-flow-steps/ad08beb8-b4a5-4a0e-ae99-1174b3b47d47>. # Set to last step
    <http://data.lblod.info/id/application-forms/653B78470D9A7F921679D057> adms:status <http://lblod.data.gift/concepts/79a52da4-f491-4e2f-9374-89a13cde8ecd> . # CONCEPT status

  }
}
WHERE {
  GRAPH ?g {
    <http://data.lblod.info/id/subsidy-measure-consumptions/63491AA4C8723785872F8DF3> adms:status ?oldConsumptionStatus .
    <http://data.lblod.info/id/application-forms/653B78470D9A7F921679D057> adms:status ?oldFormStatus .
  }
}
;
#Beveren-Kruibeke-Zwijndrecht
DELETE {
  GRAPH ?g {
    <http://data.lblod.info/id/subsidy-measure-consumptions/6347C0B3C8723785872F8B25> adms:status ?oldConsumptionStatus .
    <http://data.lblod.info/id/application-forms/640EEC315440073AC946A18C> adms:status ?oldFormStatus .
  }
}
INSERT {
  GRAPH ?g {
    <http://data.lblod.info/id/subsidy-measure-consumptions/6347C0B3C8723785872F8B25> adms:status <http://lblod.data.gift/concepts/c849ca98-455d-4f31-9e95-a3d9d06e4497> ; # ACTIVE status
    <http://www.w3.org/2007/uwa/context/common.owl#active> <http://lblod.data.info/id/subsidie-application-flow-steps/08598c1d-1ec8-4ab4-88f8-3623d7952c98>. # Set to last step
    <http://data.lblod.info/id/application-forms/640EEC315440073AC946A18C> adms:status <http://lblod.data.gift/concepts/79a52da4-f491-4e2f-9374-89a13cde8ecd> . # CONCEPT

  }
}
WHERE {
  GRAPH ?g {
    <http://data.lblod.info/id/subsidy-measure-consumptions/6347C0B3C8723785872F8B25> adms:status ?oldConsumptionStatus .
    <http://data.lblod.info/id/application-forms/640EEC315440073AC946A18C> adms:status ?oldFormStatus .
  }
}
;
#Dilbeek
DELETE {
  GRAPH ?g {
    <http://data.lblod.info/id/subsidy-measure-consumptions/624D2E4877B95A0008000347> adms:status ?oldConsumptionStatus ;
     <http://www.w3.org/2007/uwa/context/common.owl#active> ?oldActiveStep .
    <http://data.lblod.info/id/application-forms/624D4B8177B95A000800035D> adms:status ?oldFormStatus .
  }
}
INSERT {
  GRAPH ?g {
    <http://data.lblod.info/id/subsidy-measure-consumptions/624D2E4877B95A0008000347> adms:status <http://lblod.data.gift/concepts/c849ca98-455d-4f31-9e95-a3d9d06e4497> ; # ACTIVE status
    <http://www.w3.org/2007/uwa/context/common.owl#active> <http://lblod.data.info/id/subsidie-application-flow-steps/5f6193e5-7427-4ec8-90b1-636ed5181c19>. # Set to last step
    <http://data.lblod.info/id/application-forms/624D4B8177B95A000800035D> adms:status <http://lblod.data.gift/concepts/79a52da4-f491-4e2f-9374-89a13cde8ecd> . # CONCEPT

  }
}
WHERE {
  GRAPH ?g {
    <http://data.lblod.info/id/subsidy-measure-consumptions/624D2E4877B95A0008000347> adms:status ?oldConsumptionStatus .
    <http://data.lblod.info/id/application-forms/624D4B8177B95A000800035D> adms:status ?oldFormStatus .
    OPTIONAL { <http://data.lblod.info/id/subsidy-measure-consumptions/624D2E4877B95A0008000347> <http://www.w3.org/2007/uwa/context/common.owl#active> ?oldActiveStep . }
  }
}